<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='10' fill='orange'/><text x='50' y='70' font-family='Arial' font-size='60' text-anchor='middle' fill='white'>ü¶è</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #ffffff;
            padding: 20px;
        }
        
        .calculator {
            width: 100%;
            max-width: 360px;
            background-color: #fff;
            border-radius: 24px;
            box-shadow: 0 12px 30px rgba(255, 152, 0, 0.08);
            overflow: hidden;
            border: 1px solid #ffecd2;
        }
        
        .display {
            background-color: #fff9f0;
            color: #333;
            padding: 30px 24px;
            text-align: right;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            border-bottom: 1px solid #ffecd2;
        }
        
        .previous-operand {
            font-size: 1.1rem;
            color: #ff9800;
            min-height: 1.5rem;
            word-break: break-all;
            opacity: 0.8;
            font-weight: 500;
        }
        
        .current-operand {
            font-size: 3rem;
            font-weight: 300;
            word-break: break-all;
            line-height: 1.2;
            color: #333;
            letter-spacing: -1px;
        }
        
        .buttons-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            padding: 24px;
            background-color: #fff;
        }
        
        button {
            border: none;
            padding: 20px 10px;
            font-size: 1.4rem;
            cursor: pointer;
            background-color: #fff;
            transition: all 0.2s ease;
            outline: none;
            border-radius: 18px;
            color: #555;
            font-weight: 500;
            box-shadow: 0 4px 8px rgba(255, 152, 0, 0.05);
            border: 1px solid #ffecd2;
        }
        
        button:hover {
            background-color: #fff7ed;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255, 152, 0, 0.1);
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(255, 152, 0, 0.05);
        }
        
        .operation {
            background-color: #ff9800;
            color: white;
            border: none;
            font-weight: 500;
        }
        
        .operation:hover {
            background-color: #ff8a00;
        }
        
        .equals {
            background-color: #ff9800;
            color: white;
            font-weight: 500;
            border: none;
            grid-column: span 2;
        }
        
        .equals:hover {
            background-color: #ff8a00;
        }
        
        .clear, .delete {
            background-color: #fff0e0;
            color: #ff9800;
            font-weight: 500;
            border: 1px solid #ffd8b2;
        }
        
        .clear:hover, .delete:hover {
            background-color: #ffe8cc;
        }
        
        .span-two {
            grid-column: span 2;
        }
        
        .number {
            color: #333;
        }
        
        footer {
            margin-top: 40px;
            text-align: center;
            color: #888;
            font-size: 0.9rem;
            padding: 20px;
            border-top: 1px solid #f0f0f0;
            width: 100%;
            max-width: 360px;
        }
        
        .copyright {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .copyright span {
            color: #ff9800;
        }
        
        @media (max-width: 480px) {
            .calculator {
                max-width: 100%;
            }
            
            button {
                padding: 20px 5px;
                font-size: 1.3rem;
                border-radius: 16px;
            }
            
            .current-operand {
                font-size: 2.5rem;
            }
            
            .buttons-grid {
                padding: 20px;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="calculator">
        <div class="display">
            <div class="previous-operand" id="previous-operand"></div>
            <div class="current-operand" id="current-operand">0</div>
        </div>
        
        <div class="buttons-grid">
            <button class="clear span-two" data-action="clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
            <button class="delete" data-action="delete">‚å´</button>
            <button class="operation" data-operation="√∑">√∑</button>
            
            <button class="number" data-number="7">7</button>
            <button class="number" data-number="8">8</button>
            <button class="number" data-number="9">9</button>
            <button class="operation" data-operation="√ó">√ó</button>
            
            <button class="number" data-number="4">4</button>
            <button class="number" data-number="5">5</button>
            <button class="number" data-number="6">6</button>
            <button class="operation" data-operation="-">-</button>
            
            <button class="number" data-number="1">1</button>
            <button class="number" data-number="2">2</button>
            <button class="number" data-number="3">3</button>
            <button class="operation" data-operation="+">+</button>
            
            <button class="number" data-number="0">0</button>
            <button class="number" data-number=".">,</button>
            <button class="equals" data-action="equals">=</button>
        </div>
    </div>
    
    <footer>
        <div class="copyright">
            &copy; Terre & Co, 2025
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            const currentOperandElement = document.getElementById('current-operand');
            const previousOperandElement = document.getElementById('previous-operand');
            
            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
            let currentOperand = '0';
            let previousOperand = '';
            let operation = null;
            let resetCurrentOperand = false;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è
            function updateDisplay() {
                currentOperandElement.textContent = currentOperand;
                previousOperandElement.textContent = previousOperand;
            }
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ü–∏—Ñ—Ä—ã
            function appendNumber(number) {
                if (resetCurrentOperand) {
                    currentOperand = '';
                    resetCurrentOperand = false;
                }
                
                if (number === ',' && currentOperand.includes(',')) return;
                
                if (currentOperand === '0' && number !== ',') {
                    currentOperand = number;
                } else {
                    currentOperand += number;
                }
                
                updateDisplay();
            }
            
            // –í—ã–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏
            function chooseOperation(op) {
                if (currentOperand === '') return;
                
                if (previousOperand !== '') {
                    calculate();
                }
                
                operation = op;
                previousOperand = `${currentOperand} ${op}`;
                resetCurrentOperand = true;
                updateDisplay();
            }
            
            // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ
            function calculate() {
                let computation;
                const prev = parseFloat(previousOperand.replace(/[^0-9,]/g, '').replace(',', '.'));
                const current = parseFloat(currentOperand.replace(',', '.'));
                
                if (isNaN(prev) || isNaN(current)) return;
                
                switch (operation) {
                    case '+':
                        computation = prev + current;
                        break;
                    case '-':
                        computation = prev - current;
                        break;
                    case '√ó':
                        computation = prev * current;
                        break;
                    case '√∑':
                        if (current === 0) {
                            alert("–û—à–∏–±–∫–∞: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!");
                            clear();
                            return;
                        }
                        computation = prev / current;
                        break;
                    default:
                        return;
                }
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                let result = computation.toString();
                if (result.includes('.')) {
                    result = result.replace('.', ',');
                    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
                    const integerPart = result.split(',')[0];
                    const decimalPart = result.split(',')[1];
                    if (decimalPart.length > 5) {
                        result = integerPart + ',' + decimalPart.substring(0, 5);
                    }
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
                currentOperand = result;
                operation = null;
                previousOperand = '';
                resetCurrentOperand = true;
                updateDisplay();
            }
            
            // –û—á–∏—Å—Ç–∫–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
            function clear() {
                currentOperand = '0';
                previousOperand = '';
                operation = null;
                resetCurrentOperand = false;
                updateDisplay();
            }
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–º–≤–æ–ª–∞
            function deleteLast() {
                if (resetCurrentOperand || currentOperand === '0') return;
                
                if (currentOperand.length === 1) {
                    currentOperand = '0';
                } else {
                    currentOperand = currentOperand.slice(0, -1);
                }
                
                updateDisplay();
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫
            document.querySelector('.buttons-grid').addEventListener('click', (e) => {
                if (!e.target.matches('button')) return;
                
                const button = e.target;
                
                if (button.hasAttribute('data-number')) {
                    appendNumber(button.getAttribute('data-number'));
                } else if (button.hasAttribute('data-operation')) {
                    chooseOperation(button.getAttribute('data-operation'));
                } else if (button.getAttribute('data-action') === 'equals') {
                    calculate();
                } else if (button.getAttribute('data-action') === 'clear') {
                    clear();
                } else if (button.getAttribute('data-action') === 'delete') {
                    deleteLast();
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏
                button.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    button.style.transform = '';
                }, 150);
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            document.addEventListener('keydown', (e) => {
                if (e.key >= '0' && e.key <= '9') {
                    appendNumber(e.key);
                } else if (e.key === '.' || e.key === ',') {
                    appendNumber(',');
                } else if (e.key === '+' || e.key === '-' || e.key === '*' || e.key === '/') {
                    let operation;
                    switch (e.key) {
                        case '+': operation = '+'; break;
                        case '-': operation = '-'; break;
                        case '*': operation = '√ó'; break;
                        case '/': operation = '√∑'; break;
                    }
                    chooseOperation(operation);
                } else if (e.key === 'Enter' || e.key === '=') {
                    e.preventDefault();
                    calculate();
                } else if (e.key === 'Escape' || e.key === 'Delete') {
                    clear();
                } else if (e.key === 'Backspace') {
                    deleteLast();
                }
            });
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            updateDisplay();
        });
    </script>
</body>
</html>
